import{n as r}from"./laravel-vue-pagination.es-dea5197e.js";import{_ as u,d as p,o as s,c as i,a as t,F as h,e as m,f as g,t as c}from"./app-89dd813c.js";const _={components:{Bootstrap5Pagination:r},data(){return{coupons:[]}},methods:{getCoupons(e=1){this.$emit("loading"),axios.get(`/api/admin/coupons/${e}`).then(a=>{this.coupons=a.data}).catch(a=>{alert("Something goes wrong. Try again.")}).finally(()=>{this.$emit("loaded")})},generateCoupon(){this.$emit("loading"),axios.post("/api/admin/coupons").then(e=>{this.coupons.data.unshift(e.data.data)}).catch(e=>{console.log(e)}).finally(()=>{this.$emit("loaded")})},updateStatus(e){axios.patch(`/api/admin/coupons/${e}/status/update`)}},mounted(){this.getCoupons()},unmounted(){this.$emit("loaded")}},f={class:"coupons"},C={class:"table table-striped"},b=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Coupon"),t("th",{scope:"col"},"User"),t("th",{scope:"col"},"Status"),t("th",{scope:"col"},"Created at")])],-1),k={class:"form-check form-switch"},x=["checked","onChange"];function $(e,a,y,P,l,n){const d=p("Bootstrap5Pagination");return s(),i("div",f,[t("div",{class:"btn btn-primary w-100 mb-3",onClick:a[0]||(a[0]=o=>n.generateCoupon())}," Generate Coupon "),t("table",C,[b,t("tbody",null,[(s(!0),i(h,null,m(l.coupons.data,o=>(s(),i("tr",null,[t("td",null,c(o.coupon),1),t("td",null,c(o.user),1),t("td",null,[t("div",k,[t("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"user-status",checked:o.status,onChange:v=>n.updateStatus(o.id)},null,40,x)])]),t("td",null,c(o.created_at),1)]))),256))])]),g(d,{data:l.coupons,onPaginationChangePage:n.getCoupons},null,8,["data","onPaginationChangePage"])])}const w=u(_,[["render",$]]);export{w as default};
